<div class="container py-2">
  <h1 class="mb-4 text-center">Client Payment Details</h1>

  <!-- Client Info -->
  <div class="card mb-4 shadow-sm">
    <div class="card-header bg-primary text-white">
      <h5 class="mb-0"><i class="fas fa-user me-2"></i>Client Information</h5>
    </div>
    <div class="card-body row">
      <div class="col-md-6 mb-2"><strong>Name:</strong> <%= client.name %></div>
      <div class="col-md-6 mb-2">
        <strong>Phone:</strong> <%= client.phone %>
      </div>
      <div class="col-md-6 mb-2">
        <strong>Email:</strong> <%= client.email %>
      </div>
      <div class="col-md-6 mb-2">
        <strong>Message:</strong> <%= client.message || "—" %>
      </div>
      <div class="col-12">
        <strong>Unique Link:</strong>
        <a href="<%= client.link %>" target="_blank"><%= client.link %></a>
      </div>
    </div>
  </div>

  <!-- Payment Info -->
  <div class="card mb-4 shadow-sm">
    <div class="card-header bg-success text-white">
      <h5 class="mb-0">
        <i class="fas fa-credit-card me-2"></i>Payment Details
      </h5>
    </div>
    <div class="card-body row">
      <div class="col-md-6 mb-2"><strong>Bank:</strong> <%= client.bank %></div>
      <div class="col-md-6 mb-2">
        <strong>Account Number:</strong> <%= client.accountNumber %>
      </div>
      <div class="col-md-6 mb-2">
        <strong>Amount:</strong> <%= client.amount.toLocaleString() %> <%=
        client.currency %>
      </div>
      <div class="col-md-6 mb-2">
        <strong>Transaction Fee:</strong> <%= client.txsFee %>
      </div>
      <div class="col-md-6 mb-2">
        <strong>Transaction ID:</strong> <%= client.transactionId || "—" %>
      </div>
      <div class="col-md-6 mb-2">
        <strong>Initiated At:</strong> <%= client.initiatedAt.toDateString() %>
      </div>
      <div class="col-12">
        <strong>Status:</strong>
        <span
          class="badge <%= client.status.toLowerCase() === 'completed' ? 'bg-success' : 'bg-warning text-dark' %>"
        >
          <%= client.status %>
        </span>
      </div>
    </div>
  </div>

  <!-- Support Contact -->
  <% if (client.support && client.support.contact) { %>
  <div class="card mb-4 shadow-sm">
    <div class="card-header bg-info text-white">
      <h5 class="mb-0"><i class="fas fa-headset me-2"></i>Support Contact</h5>
    </div>
    <div class="card-body"><%= client.support.contact %></div>
  </div>
  <% } %>

  <!-- Gift Card -->
  <% if (client.giftCard && (client.giftCard.code ||
  client.giftCard.frontImageUrl)) { %>
  <div class="card mb-4 shadow-sm">
    <div class="card-header bg-warning text-dark">
      <h5 class="mb-0"><i class="fas fa-gift me-2"></i>Gift Card</h5>
    </div>
    <div class="card-body row">
      <div class="col-md-6 mb-2">
        <strong>Code:</strong> <%= client.giftCard.code || "—" %>
      </div>
      <div class="col-md-6 mb-2">
        <strong>Type:</strong> <%= client.giftCard.type || "—" %>
      </div>
      <% if (client.giftCard.frontImageUrl) { %>
      <div class="col-6 mb-2">
        <strong>Front Image:</strong>
        <a href="<%= client.giftCard.frontImageUrl %>">
          <img
            src="<%= client.giftCard.frontImageUrl %>"
            class="img-fluid rounded shadow-sm"
        /></a>
      </div>
      <% } %> <% if (client.giftCard.backImageUrl) { %>
      <div class="col-6 mb-2">
        <strong>Back Image:</strong>
        <a href="<%= client.giftCard.backImageUrl %>">
          <img
            src="<%= client.giftCard.backImageUrl %>"
            class="img-fluid rounded shadow-sm"
        /></a>
      </div>
      <% } %>
    </div>
  </div>
  <% } %>

  <!-- Crypto Transaction -->
  <% if (client.cryptoTransaction && (client.cryptoTransaction.slipImageUrl ||
  client.cryptoTransaction.transactionHash)) { %>
  <div class="card mb-4 shadow-sm">
    <div class="card-header bg-secondary text-white">
      <h5 class="mb-0"><i class="fas fa-coins me-2"></i>Crypto Transaction</h5>
    </div>
    <div class="card-body row">
      <div class="col-md-6 mb-2">
        <strong>Type:</strong> <%= client.cryptoTransaction.type %>
      </div>
      <div class="col-md-6 mb-2">
        <strong>Transaction Hash:</strong> <%=
        client.cryptoTransaction.transactionHash || "—" %>
      </div>
      <% if (client.cryptoTransaction.slipImageUrl) { %>
      <div class="col-12 mt-2">
        <strong>Transaction Slip:</strong>
        <a href="<%= client.cryptoTransaction.slipImageUrl %>">
          <img
            src="<%= client.cryptoTransaction.slipImageUrl %>"
            class="img-fluid rounded shadow-sm"
        /></a>
      </div>
      <% } %>
    </div>
  </div>
  <% } %>
</div>

<div class="text-center my-4">
  <!-- Accept -->
  <a
    href="/user/update-transaction/<%= client._id %>?status=successful"
    class="btn btn-success me-2"
    onclick="return confirm('Are you sure you want to ACCEPT this transaction?');"
  >
    <i class="fas fa-check me-1"></i> Accept Transaction
  </a>

  <!-- Decline -->
  <a
    href="/user/update-transaction/<%= client._id %>?status=declined"
    class="btn btn-danger me-2"
    onclick="return confirm('Are you sure you want to DECLINE this transaction?');"
  >
    <i class="fas fa-times me-1"></i> Decline Transaction
  </a>

  <!-- Delete -->
  <a
    href="/user/delete-transaction/<%= client._id %>"
    class="btn btn-outline-danger"
    onclick="return confirm('⚠️ This will permanently DELETE this transaction and all its data. Are you sure?');"
  >
    <i class="fas fa-trash me-1"></i> Delete Transaction
  </a>
</div>
