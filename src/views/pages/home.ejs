<% layout("layout/boilerplate") %>

<!-- MODERN WHITE THEME STYLES -->
<style>
  :root {
    --primary-blue: #0f1b33;
    --primary-navy: #1a2b6d;
    --accent-gold: #c9a96a;
    --accent-light: #f8f5f0;
    --white: #ffffff;
    --light-bg: #f8f9fa;
    --border-light: #eaeaea;
    --text-dark: #2d3748;
    --text-muted: #718096;
    --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.04);
    --shadow-md: 0 8px 32px rgba(0, 0, 0, 0.08);
    --shadow-lg: 0 16px 48px rgba(0, 0, 0, 0.12);
    --radius-lg: 24px;
    --radius-md: 16px;
    --radius-sm: 12px;
    --gradient-primary: linear-gradient(135deg, #0f1b33 0%, #1a2b6d 100%);
    --gradient-gold: linear-gradient(135deg, #c9a96a 0%, #d4b87a 100%);
    --gradient-light: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
  }

  /* MODERN RESET & BASE */
  * {
    margin: 0;
    padding: 0;

    box-sizing: border-box;
  }

  body {
    background: var(--white);
    color: var(--text-dark);
    font-family: "Inter", -apple-system, BlinkMacSystemFont, sans-serif;
    line-height: 1.6;
  }

  /* ELEGANT CARD DESIGNS */
  .elegant-card {
    background: var(--white);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-md);
    border: 1px solid var(--border-light);
    transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    position: relative;
    overflow: hidden;
  }

  .elegant-card::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(
      135deg,
      rgba(201, 169, 106, 0.02) 0%,
      rgba(15, 27, 51, 0.02) 100%
    );
    opacity: 0;
    transition: opacity 0.4s ease;
  }

  .elegant-card:hover {
    transform: translateY(-8px);
    box-shadow: var(--shadow-lg);
  }

  .elegant-card:hover::before {
    opacity: 1;
  }

  .gradient-card {
    background: var(--gradient-primary);
    color: white;
    border: none;
  }

  .gradient-card::before {
    display: none;
  }

  /* HERO SECTION - PREMIUM WHITE */
  #hero {
    min-height: 100vh;
    display: flex;
    align-items: center;
    position: relative;
    background: var(--gradient-light);
    overflow: hidden;
    margin-top: -2em;
  }

  .hero-bg {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: radial-gradient(
        circle at 20% 80%,
        rgba(201, 169, 106, 0.05) 0%,
        transparent 50%
      ),
      radial-gradient(
        circle at 80% 20%,
        rgba(26, 43, 109, 0.03) 0%,
        transparent 50%
      );
    z-index: 1;
  }

  .display-title {
    font-weight: 700;
    background: var(--gradient-primary);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    line-height: 1.1;
  }

  .hero-content h1 {
    font-size: 3.5rem;
    margin-bottom: 1.5rem;
  }

  .hero-content .lead {
    font-size: 1.3rem;
    color: var(--text-muted);
    margin-bottom: 2.5rem;
    line-height: 1.7;
  }

  .hero-features {
    display: flex;
    gap: 2.5rem;
    margin-top: 3rem;
    flex-wrap: wrap;
  }

  .hero-feature {
    display: flex;
    align-items: center;
    gap: 1rem;
    color: var(--text-dark);
    font-weight: 500;
  }

  .hero-feature i {
    color: var(--accent-gold);
    font-size: 1.2rem;
    width: 24px;
  }

  /* TRANSACTION LOOKUP CARD */
  .lookup-card {
    padding: 3rem 2.5rem;
    position: relative;
    z-index: 2;
  }

  .lookup-card h4 {
    color: var(--primary-blue);
    margin-bottom: 2rem;
    font-weight: 600;
  }

  .modern-input {
    background: var(--white);
    border: 2px solid var(--border-light);
    border-radius: var(--radius-md);
    padding: 1rem 1.5rem;
    color: var(--text-dark);
    font-size: 1rem;
    transition: all 0.3s ease;
    width: 100%;
  }

  .modern-input:focus {
    border-color: var(--accent-gold);
    box-shadow: 0 0 0 3px rgba(201, 169, 106, 0.1);
    outline: none;
  }

  .modern-btn {
    background: var(--gradient-primary);
    border: none;
    border-radius: var(--radius-md);
    padding: 1rem 2rem;
    color: white;
    font-weight: 600;
    transition: all 0.3s ease;
    width: 100%;
    position: relative;
    overflow: hidden;
  }

  .modern-btn::before {
    content: "";
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(
      90deg,
      transparent,
      rgba(255, 255, 255, 0.2),
      transparent
    );
    transition: left 0.5s ease;
  }

  .modern-btn:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
  }

  .modern-btn:hover::before {
    left: 100%;
  }

  .btn-gold {
    background: var(--gradient-gold);
    color: var(--primary-blue);
  }

  /* GLOBAL REACH STATS */
  .stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 2rem;
  }

  .stat-card {
    padding: 2.5rem 2rem;
    text-align: center;
  }

  .stat-number {
    font-size: 3rem;
    font-weight: 700;
    background: var(--gradient-primary);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 0.5rem;
  }

  .stat-label {
    color: var(--text-muted);
    font-size: 0.95rem;
    font-weight: 500;
  }

  /* FEATURES SECTION */
  .feature-card {
    padding: 3rem 2rem;
    text-align: center;
    height: 100%;
  }

  .feature-icon {
    width: 80px;
    height: 80px;
    background: var(--gradient-gold);
    color: var(--white);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.8rem;
    margin: 0 auto 2rem;
    transition: all 0.4s ease;
  }

  .feature-card:hover .feature-icon {
    transform: scale(1.1) rotate(5deg);
  }

  .feature-card h5 {
    color: var(--primary-blue);
    margin-bottom: 1rem;
    font-weight: 600;
  }

  .feature-card p {
    color: var(--text-muted);
    line-height: 1.7;
  }

  /* CORPORATE SECTION */
  .corporate-feature {
    display: flex;
    align-items: flex-start;
    gap: 2rem;
    margin-bottom: 3rem;
  }

  .corporate-icon {
    width: 70px;
    height: 70px;
    background: var(--gradient-gold);
    color: var(--white);
    border-radius: var(--radius-md);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    flex-shrink: 0;
    transition: all 0.4s ease;
  }

  .corporate-feature:hover .corporate-icon {
    transform: rotate(10deg) scale(1.1);
  }

  /* SERVICES GRID */
  .services-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 2rem;
  }

  .service-card {
    padding: 2.5rem;
    height: 100%;
  }

  .service-icon {
    font-size: 2.5rem;
    color: var(--accent-gold);
    margin-bottom: 1.5rem;
  }

  /* TESTIMONIALS */
  .testimonial-card {
    padding: 2.5rem;
    height: 100%;
    position: relative;
    border-left: 4px solid var(--accent-gold);
  }

  .testimonial-text {
    font-style: italic;
    color: var(--text-dark);
    margin-bottom: 2rem;
    line-height: 1.8;
    font-size: 1.1rem;
  }

  .client-info h6 {
    color: var(--primary-blue);
    margin-bottom: 0.25rem;
  }

  /* CTA SECTION */
  .cta-section {
    position: relative;
    background: var(--gradient-primary);
    overflow: hidden;
  }

  .cta-bg {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: radial-gradient(
        circle at 30% 70%,
        rgba(201, 169, 106, 0.1) 0%,
        transparent 50%
      ),
      radial-gradient(
        circle at 70% 30%,
        rgba(255, 255, 255, 0.05) 0%,
        transparent 50%
      );
  }

  /* FOOTER */
  .footer {
    background: var(--primary-blue);
    color: white;
  }

  .footer h5 {
    color: var(--accent-gold);
    margin-bottom: 1.5rem;
  }

  .footer a {
    color: rgba(255, 255, 255, 0.8);
    text-decoration: none;
    transition: color 0.3s ease;
  }

  .footer a:hover {
    color: var(--accent-gold);
  }

  /* ANIMATIONS */
  .fade-in {
    opacity: 0;
    transform: translateY(30px);
    transition: all 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  }

  .fade-in.show {
    opacity: 1;
    transform: translateY(0);
  }

  .float-animation {
    animation: float 6s ease-in-out infinite;
  }

  @keyframes float {
    0%,
    100% {
      transform: translateY(0px) rotate(0deg);
    }
    50% {
      transform: translateY(-20px) rotate(1deg);
    }
  }

  /* RESPONSIVE DESIGN */
  @media (max-width: 768px) {
    .hero-content h1 {
      font-size: 2.5rem;
    }

    .hero-features {
      flex-direction: column;
      gap: 1.5rem;
    }

    .lookup-card {
      padding: 2rem 1.5rem;
    }

    .corporate-feature {
      flex-direction: column;
      text-align: center;
    }
  }

  /* ADVANCED FEATURES */
  .gradient-border {
    position: relative;
    background: var(--white);
    border-radius: var(--radius-lg);
  }

  .gradient-border::before {
    content: "";
    position: absolute;
    top: -2px;
    left: -2px;
    right: -2px;
    bottom: -2px;
    background: var(--gradient-gold);
    border-radius: calc(var(--radius-lg) + 2px);
    z-index: -1;
    opacity: 0;
    transition: opacity 0.3s ease;
  }

  .gradient-border:hover::before {
    opacity: 1;
  }

  .interactive-chart {
    background: var(--white);
    border-radius: var(--radius-lg);
    padding: 2rem;
    box-shadow: var(--shadow-md);
  }

  .market-indicators {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 1rem;
  }

  .indicator {
    text-align: center;
    padding: 1.5rem;
    border-radius: var(--radius-md);
    background: var(--light-bg);
    transition: all 0.3s ease;
  }

  .indicator:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-sm);
  }
</style>

<!-- HERO SECTION -->
<section>
  <div class="container">
    <div class="row align-items-center min-vh-100">
      <div class="col-lg-6">
        <div class="hero-content">
          <h1 class="display-title">Redefining Global Banking Excellence</h1>
          <p class="lead">
            Where cutting-edge technology meets timeless financial expertise.
            Serving institutional clients and private wealth across 150+
            countries with unparalleled sophistication and security.
          </p>

          <div class="hero-features">
            <div class="hero-feature">
              <i class="fas fa-shield-alt"></i>
              <span>ISO 27001 Certified Security</span>
            </div>
            <div class="hero-feature">
              <i class="fas fa-bolt"></i>
              <span>Real-time Global Settlements</span>
            </div>
            <div class="hero-feature">
              <i class="fas fa-globe"></i>
              <span>150+ International Markets</span>
            </div>
          </div>
        </div>
      </div>

      <div class="col-lg-5 offset-lg-1 fade-in">
        <div class="lookup-card">
          <h4>Secure Transaction Portal</h4>
          <form class="txs-form" action="/user/txs" method="post">
            <div class="mb-4">
              <label class="form-label mb-2 fw-semibold"
                >Transaction Reference</label
              >
              <input
                type="text"
                class="modern-input"
                placeholder="TLGF-XXXX-XXXXX-XXXXX"
                name="txsId"
                required
              />
            </div>
            <button type="submit" class="modern-btn">
              <i class="fas fa-search me-2"></i>Verify Global Transaction
            </button>
          </form>
          <small class="d-block mt-3 text-center text-muted">
            Sample: <code class="text-accent">GFI-9F4C-3D23B-Y783L</code>
          </small>

          <div class="mt-4 pt-4 border-top">
            <h6 class="mb-3 fw-semibold">
              Market Rates
              <small class="text-muted ms-2 fs-7" id="lastUpdated"
                >Updating...</small
              >
            </h6>
            <div class="market-indicators">
              <div class="indicator">
                <div class="d-flex justify-content-between align-items-center">
                  <span class="fw-bold text-primary">EUR/USD</span>
                  <span class="change-indicator" data-pair="EURUSD">
                    <i class="fas fa-caret-up text-success"></i>
                  </span>
                </div>
                <div
                  class="rate-value text-muted small"
                  data-pair="EURUSD"
                  data-base="1.0876"
                >
                  1.0876
                </div>
              </div>
              <div class="indicator">
                <div class="d-flex justify-content-between align-items-center">
                  <span class="fw-bold text-primary">GBP/USD</span>
                  <span class="change-indicator" data-pair="GBPUSD">
                    <i class="fas fa-caret-up text-success"></i>
                  </span>
                </div>
                <div
                  class="rate-value text-muted small"
                  data-pair="GBPUSD"
                  data-base="1.2742"
                >
                  1.2742
                </div>
              </div>
              <div class="indicator">
                <div class="d-flex justify-content-between align-items-center">
                  <span class="fw-bold text-primary">USD/JPY</span>
                  <span class="change-indicator" data-pair="USDJPY">
                    <i class="fas fa-caret-down text-danger"></i>
                  </span>
                </div>
                <div
                  class="rate-value text-muted small"
                  data-pair="USDJPY"
                  data-base="149.32"
                >
                  149.32
                </div>
              </div>
              <!-- Additional pairs for more realism -->
              <div class="indicator">
                <div class="d-flex justify-content-between align-items-center">
                  <span class="fw-bold text-primary">XAU/USD</span>
                  <span class="change-indicator" data-pair="XAUUSD">
                    <i class="fas fa-caret-up text-success"></i>
                  </span>
                </div>
                <div
                  class="rate-value text-muted small"
                  data-pair="XAUUSD"
                  data-base="2185.42"
                >
                  2,185.42
                </div>
              </div>
            </div>

            <!-- Market status -->
            <div class="mt-3 pt-2 border-top">
              <div class="d-flex justify-content-between align-items-center">
                <small class="text-muted">Market Status</small>
                <span
                  class="badge bg-success bg-opacity-10 text-success border border-success border-opacity-25"
                >
                  <i class="fas fa-circle fa-xs me-1"></i>Live
                </span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- GLOBAL REACH -->
<section id="global" class="py-5 bg-light">
  <div class="container">
    <div class="stats-grid">
      <div class="elegant-card stat-card fade-in">
        <div class="stat-number">48</div>
        <div class="stat-label">Global Offices</div>
      </div>
      <div class="elegant-card stat-card fade-in">
        <div class="stat-number">$2.8T</div>
        <div class="stat-label">Assets Under Care</div>
      </div>
      <div class="elegant-card stat-card fade-in">
        <div class="stat-number">150+</div>
        <div class="stat-label">Markets Served</div>
      </div>
      <div class="elegant-card stat-card fade-in">
        <div class="stat-number">85+</div>
        <div class="stat-label">Years of Excellence</div>
      </div>
    </div>
  </div>
</section>

<!-- BANKING SERVICES -->
<section id="services" class="py-5">
  <div class="container">
    <h2 class="text-center display-title mb-3 fade-in">
      Institutional-Grade Solutions
    </h2>
    <p class="text-center text-muted mb-5 fade-in">
      Advanced financial infrastructure for the world's most demanding clients
    </p>

    <div class="services-grid">
      <div class="elegant-card service-card fade-in">
        <div class="service-icon">
          <i class="fas fa-building"></i>
        </div>
        <h4>Corporate Treasury</h4>
        <p class="mb-4">
          Multi-currency accounts, automated cash management, and sophisticated
          liquidity solutions for global enterprises.
        </p>
        <ul class="list-unstyled">
          <li class="mb-2">
            <i class="fas fa-check text-success me-2"></i>Automated Cash
            Management
          </li>
          <li class="mb-2">
            <i class="fas fa-check text-success me-2"></i>Multi-currency
            Solutions
          </li>
          <li><i class="fas fa-check text-success me-2"></i>Risk Management</li>
        </ul>
      </div>

      <div class="elegant-card service-card fade-in">
        <div class="service-icon">
          <i class="fas fa-user-tie"></i>
        </div>
        <h4>Private Wealth</h4>
        <p class="mb-4">
          Bespoke portfolio management, generational planning, and exclusive
          investment opportunities for UHNW families.
        </p>
        <ul class="list-unstyled">
          <li class="mb-2">
            <i class="fas fa-check text-success me-2"></i>Wealth Planning
          </li>
          <li class="mb-2">
            <i class="fas fa-check text-success me-2"></i>Investment Management
          </li>
          <li>
            <i class="fas fa-check text-success me-2"></i>Family Office Services
          </li>
        </ul>
      </div>

      <div class="elegant-card service-card fade-in">
        <div class="service-icon">
          <i class="fas fa-globe-americas"></i>
        </div>
        <h4>Trade Finance</h4>
        <p class="mb-4">
          End-to-end supply chain financing, letters of credit, and
          export-import solutions with global reach.
        </p>
        <ul class="list-unstyled">
          <li class="mb-2">
            <i class="fas fa-check text-success me-2"></i>Supply Chain Finance
          </li>
          <li class="mb-2">
            <i class="fas fa-check text-success me-2"></i>Letters of Credit
          </li>
          <li>
            <i class="fas fa-check text-success me-2"></i>Export-Import
            Solutions
          </li>
        </ul>
      </div>
    </div>
  </div>
</section>

<!-- CORPORATE BANKING FOCUS -->
<section id="corporate" class="py-5 bg-light">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-lg-6 fade-in">
        <h2 class="display-title mb-4">Next-Generation Corporate Banking</h2>

        <div class="corporate-feature">
          <div class="corporate-icon">
            <i class="fas fa-robot"></i>
          </div>
          <div>
            <h5>AI-Powered Treasury</h5>
            <p class="text-muted mb-0">
              Machine learning algorithms optimize cash flow, predict market
              movements, and automate risk management with precision.
            </p>
          </div>
        </div>

        <div class="corporate-feature">
          <div class="corporate-icon">
            <i class="fas fa-bolt"></i>
          </div>
          <div>
            <h5>Instant Global Settlements</h5>
            <p class="text-muted mb-0">
              Real-time cross-border payments with full transparency and
              blockchain-level security protocols.
            </p>
          </div>
        </div>

        <div class="corporate-feature">
          <div class="corporate-icon">
            <i class="fas fa-trade"></i>
          </div>
          <div>
            <h5>Digital Trade Platform</h5>
            <p class="text-muted mb-0">
              End-to-end digital trade documentation and supply chain financing
              with smart contract execution.
            </p>
          </div>
        </div>
      </div>

      <div class="col-lg-5 offset-lg-1 fade-in">
        <div class="gradient-card elegant-card p-5 text-center float-animation">
          <div class="feature-icon mx-auto mb-4">
            <i class="fas fa-medal"></i>
          </div>
          <h4 className="mb-3 text-light">Award-Winning Platform</h4>
          <p className="text-light opacity-90 mb-4">
            Recognized globally for innovation in digital banking and client
            service excellence.
          </p>
          <div class="row text-center">
            <div class="col-6 mb-3">
              <div class="stat-number text-light">#1</div>
              <div class="stat-label text-light">Digital Innovation</div>
            </div>
            <div class="col-6 mb-3">
              <div class="stat-number text-light">AAA</div>
              <div class="stat-label text-light">Credit Rating</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- INDUSTRY EXPERTISE -->
<section class="py-5">
  <div class="container">
    <h2 class="text-center display-title mb-3 fade-in">
      Sector Specialization
    </h2>
    <p class="text-center text-muted mb-5 fade-in">
      Deep expertise across the global economic landscape
    </p>

    <div class="row g-4">
      <div class="col-md-2 col-4 fade-in">
        <div class="elegant-card text-center p-4">
          <i class="fas fa-oil-well fa-2x text-accent mb-3"></i>
          <h6>Energy</h6>
        </div>
      </div>
      <div class="col-md-2 col-4 fade-in">
        <div class="elegant-card text-center p-4">
          <i class="fas fa-truck-medical fa-2x text-accent mb-3"></i>
          <h6>Healthcare</h6>
        </div>
      </div>
      <div class="col-md-2 col-4 fade-in">
        <div class="elegant-card text-center p-4">
          <i class="fas fa-microchip fa-2x text-accent mb-3"></i>
          <h6>Technology</h6>
        </div>
      </div>
      <div class="col-md-2 col-4 fade-in">
        <div class="elegant-card text-center p-4">
          <i class="fas fa-ship fa-2x text-accent mb-3"></i>
          <h6>Logistics</h6>
        </div>
      </div>
      <div class="col-md-2 col-4 fade-in">
        <div class="elegant-card text-center p-4">
          <i class="fas fa-gem fa-2x text-accent mb-3"></i>
          <h6>Luxury Goods</h6>
        </div>
      </div>
      <div class="col-md-2 col-4 fade-in">
        <div class="elegant-card text-center p-4">
          <i class="fas fa-seedling fa-2x text-accent mb-3"></i>
          <h6>Sustainability</h6>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- TESTIMONIALS -->
<section id="testimonials" class="py-5 bg-light">
  <div class="container">
    <h2 class="text-center display-title mb-3 fade-in">
      Global Client Partnerships
    </h2>
    <p class="text-center text-muted mb-5 fade-in">
      Trusted by the world's most sophisticated institutions
    </p>

    <div class="row g-4">
      <div class="col-md-4 fade-in">
        <div class="elegant-card testimonial-card">
          <div class="testimonial-text">
            "Their AI-driven treasury solutions transformed our cash management
            across 28 countries. The level of sophistication is unmatched in the
            banking sector."
          </div>
          <div class="client-info">
            <h6>James Wilson</h6>
            <p class="text-muted mb-0">CFO, TechGlobal Corporation</p>
          </div>
        </div>
      </div>

      <div class="col-md-4 fade-in">
        <div class="elegant-card testimonial-card">
          <div class="testimonial-text">
            "The private wealth team's global market access and bespoke
            structuring capabilities have been instrumental in our family's
            intergenerational planning."
          </div>
          <div class="client-info">
            <h6>Sarah Chen</h6>
            <p class="text-muted mb-0">Wealth Management Client</p>
          </div>
        </div>
      </div>

      <div class="col-md-4 fade-in">
        <div class="elegant-card testimonial-card">
          <div class="testimonial-text">
            "Their digital trade platform reduced our document processing time
            by 80% while providing unprecedented visibility across our supply
            chain."
          </div>
          <div class="client-info">
            <h6>Robert MÃ¼ller</h6>
            <p class="text-muted mb-0">CEO, EuroManufacturing Group</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- JAVASCRIPT -->
<script>
  // Enhanced scroll animations
  const revealElements = document.querySelectorAll(".fade-in");
  const observer = new IntersectionObserver(
    (entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          entry.target.classList.add("show");
        }
      });
    },
    { threshold: 0.15, rootMargin: "0px 0px -50px 0px" }
  );
  revealElements.forEach((el) => observer.observe(el));

  // Navbar scroll effect
  window.addEventListener("scroll", function () {
    const navbar = document.querySelector(".navbar");
    if (window.scrollY > 50) {
      navbar.classList.add("scrolled");
    } else {
      navbar.classList.remove("scrolled");
    }
  });

  // Smooth scrolling for navigation links
  document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
    anchor.addEventListener("click", function (e) {
      e.preventDefault();
      const target = document.querySelector(this.getAttribute("href"));
      if (target) {
        target.scrollIntoView({
          behavior: "smooth",
          block: "start",
        });
      }
    });
  });

  // Add floating animation to multiple elements
  const floatElements = document.querySelectorAll(".float-animation");
  floatElements.forEach((el, index) => {
    el.style.animationDelay = `${index * 0.2}s`;
  });

  class LiveMarketRates {
    constructor() {
      this.rates = {
        EURUSD: { base: 1.0876, current: 1.0876, volatility: 0.0003 },
        GBPUSD: { base: 1.2742, current: 1.2742, volatility: 0.0004 },
        USDJPY: { base: 149.32, current: 149.32, volatility: 0.05 },
        XAUUSD: { base: 2185.42, current: 2185.42, volatility: 1.2 },
      };

      this.updateInterval = null;
      this.isRunning = false;
      this.lastUpdateTime = null;

      this.init();
    }

    init() {
      this.startUpdates();
      this.updateLastUpdatedTime();
    }

    generateNewRate(pair) {
      const rate = this.rates[pair];
      const change = (Math.random() - 0.5) * 2 * rate.volatility;
      const newRate = rate.current + change;

      // Ensure rates stay within reasonable bounds
      const min = rate.base * 0.95;
      const max = rate.base * 1.05;

      return Math.max(min, Math.min(max, newRate));
    }

    formatRate(pair, rate) {
      if (pair === "XAUUSD") {
        return rate.toLocaleString(undefined, {
          minimumFractionDigits: 2,
          maximumFractionDigits: 2,
        });
      } else if (pair === "USDJPY") {
        return rate.toFixed(2);
      } else {
        return rate.toFixed(4);
      }
    }

    updateRateDisplay(pair, newRate) {
      const element = document.querySelector(
        `.rate-value[data-pair="${pair}"]`
      );
      const indicator = document.querySelector(
        `.change-indicator[data-pair="${pair}"]`
      );

      if (!element) return;

      const oldRate = this.rates[pair].current;
      const change = newRate - oldRate;

      // Update the display with animation
      element.textContent = this.formatRate(pair, newRate);
      element.classList.add("rate-update");

      // Update change indicator
      if (indicator) {
        if (change > 0) {
          indicator.innerHTML = '<i class="fas fa-caret-up text-success"></i>';
        } else if (change < 0) {
          indicator.innerHTML = '<i class="fas fa-caret-down text-danger"></i>';
        } else {
          indicator.innerHTML = '<i class="fas fa-minus text-muted"></i>';
        }
      }

      // Remove animation class after animation completes
      setTimeout(() => {
        element.classList.remove("rate-update");
      }, 1000);

      this.rates[pair].current = newRate;
    }

    updateAllRates() {
      Object.keys(this.rates).forEach((pair) => {
        const newRate = this.generateNewRate(pair);
        this.updateRateDisplay(pair, newRate);
      });

      this.updateLastUpdatedTime();
    }

    updateLastUpdatedTime() {
      const now = new Date();
      this.lastUpdateTime = now;

      const element = document.getElementById("lastUpdated");
      if (element) {
        const timeString = now.toLocaleTimeString([], {
          hour: "2-digit",
          minute: "2-digit",
          second: "2-digit",
        });
        element.textContent = `Updated: ${timeString}`;
        element.classList.add("pulsing");

        setTimeout(() => {
          element.classList.remove("pulsing");
        }, 2000);
      }
    }

    startUpdates() {
      if (this.isRunning) return;

      this.isRunning = true;
      this.updateInterval = setInterval(() => {
        this.updateAllRates();
      }, 3000); // Update every 3 seconds

      // Initial update
      this.updateAllRates();
    }

    stopUpdates() {
      if (this.updateInterval) {
        clearInterval(this.updateInterval);
        this.isRunning = false;
      }
    }

    // Method to simulate major market movement
    simulateMarketEvent(pair, percentageChange) {
      if (this.rates[pair]) {
        const current = this.rates[pair].current;
        const newRate = current * (1 + percentageChange / 100);
        this.updateRateDisplay(pair, newRate);
        this.updateLastUpdatedTime();
      }
    }
  }

  // Initialize live market rates when the page loads
  document.addEventListener("DOMContentLoaded", function () {
    const marketRates = new LiveMarketRates();

    // Optional: Simulate a market event after 15 seconds for demonstration
    setTimeout(() => {
      marketRates.simulateMarketEvent("EURUSD", 0.1); // 0.1% increase
    }, 15000);

    // Optional: Add click to refresh functionality
    document.querySelectorAll(".indicator").forEach((indicator) => {
      indicator.style.cursor = "pointer";
      indicator.addEventListener("click", function () {
        const pair = this.querySelector(".rate-value")?.dataset.pair;
        if (pair && marketRates.rates[pair]) {
          const newRate = marketRates.generateNewRate(pair);
          marketRates.updateRateDisplay(pair, newRate);
          marketRates.updateLastUpdatedTime();
        }
      });
    });

    // Export to global scope for debugging
    window.marketRates = marketRates;
  });
</script>

<style>
  .market-indicators {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
  }

  .indicator {
    background: rgba(255, 255, 255, 0.05);
    border-radius: 8px;
    padding: 0.75rem;
    border: 1px solid rgba(255, 255, 255, 0.1);
    transition: all 0.3s ease;
  }

  .indicator:hover {
    background: rgba(255, 255, 255, 0.08);
    transform: translateY(-1px);
  }

  .rate-value {
    font-family: "Courier New", monospace;
    font-weight: 600;
    font-size: 0.9rem;
    margin-top: 0.25rem;
  }

  .change-indicator {
    font-size: 0.8rem;
  }

  .pulsing {
    animation: pulse 2s infinite;
  }

  @keyframes pulse {
    0% {
      opacity: 1;
    }
    50% {
      opacity: 0.6;
    }
    100% {
      opacity: 1;
    }
  }

  .rate-update {
    animation: highlight 1s ease;
  }

  @keyframes highlight {
    0% {
      background-color: rgba(25, 135, 84, 0.3);
    }
    100% {
      background-color: transparent;
    }
  }

  .fs-7 {
    font-size: 0.75rem;
  }
</style>
